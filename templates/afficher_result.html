{% extends "layout.html" %}
{% block content %}

<script src="/static/js/jspdf.js" charset="utf-8"></script>
<script src="/static/js/jquery-2.2.4.min.js" charset="utf-8"></script>
<script src="/static/js/save-to-pc.js" charset="utf-8"></script>

<div class="col" id="result">
        {% if members %}
		<a href="#" onclick="SaveToPC()">{{text["download"]}}</a>
        <h2>{{text["title_tab"]}}</h2>
		<div class="table-container">
			<table class="table" id="print">
				<thead class="thead-light">
					<tr>
						<th scope="col">{{text["member_id"]}}</th>
						<th scope="col">{{text["first_name"]}}</th>
						<th scope="col">{{text["last_name"]}}</th>
						<th scope="col">{{text["phone_no"]}}</th>
						<th scope="col">{{text["last_donation"]}}</th>
						<th scope="col">{{text["amount_donation"]}}</th>
						<th scope="col">{{text["membership_expired"]}}</th>
					</tr>
				</thead>
				<tbody>
					{% for member in members %}
					<tr>
						<td scope="col">{{member.member_no}}</td>
						<td scope="col">{{member.f_name}}</td>
						<td scope="col">{{member.l_name}}</td>
						<td scope="col">{{member.phone_no}}</td>
						<td scope="col">{{member.date_last_donation}}</td>
						<td scope="col">{{member.last_donation}}</td>
						<td scope="col" class="expired_membership">
							{% set d,m,y=member.mem_exp_date.split('/') %}
							<script>
								var temp = document.getElementsByClassName("expired_membership");
								temp = temp[temp.length - 1];
								if(beforeToday({{d}}, {{m}}, {{y}})){
									temp.innerHTML = "{{text["membership_expired_yes"]}}";
								}else{
									temp.innerHTML = "{{text["membership_expired_no"]}}";
								}
							</script>
							
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% endif %}
		{% if erreur == "no_result" %}
		<h3>{{text["no_result"]}}</h3>
		{% elif erreur %}
        <h3>{{erreur}}</h3>
        {% endif %}
    </div>

{% endblock %}